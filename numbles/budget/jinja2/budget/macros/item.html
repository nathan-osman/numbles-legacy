{% import 'ledger/macros/util.html' as util %}
{% import 'macros/ui.html' as ui %}

{% set new = ui.button(title='New Item', icon='plus', url=url('budget:new_item')) %}

{% macro _header() %}
    <th>Name</th>
    <th>Cron</th>
    <th>Next</th>
    <th class="text-right">Amount</th>
{% endmacro %}

{% macro _data(items) %}
    {% for i in items %}
        <tr>
            <td>
                <a href="{{ i.get_absolute_url() }}">
                    {{ i.name }}
                </a>
            </td>
            <td>{{ i.cron }}</td>
            <td title="{{ i.next }}">
                {{ naturaltime(i.next) }}
            </td>
            <td class="text-right">{{ util.currency(i.amount, color=false) }}</td>
        </tr>
    {% else %}
        <tr>
            <td colspan="4">
                <span class="text-muted">
                    No items
                </span>
            </td>
        </tr>
    {% endfor %}
{% endmacro %}

{##
 # Display a list of budget items
 #}
{% macro list(items, title='Items', buttons=(new,)) %}
    {% call ui.box(title=title, icon='book', buttons=buttons) %}
        <table class="table no-margin">
            <thead>{{ _header() }}</thead>
            <tbody>{{ _data(items) }}</tbody>
        </table>
    {% endcall %}
{% endmacro %}
